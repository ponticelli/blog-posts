<!doctype html>
<html>
<body>
<script type="text/javascript">
function logItem(item) {
    console.log(item);
}

/*
function each(arr, callback) {
    for (var i = 0; i < arr.length; ++i) {
        callback(arr[i]);
    }
}

console.log("begin each");
each([1, 2, 3], logItem);
console.log("end each");
*/

/*
function asyncEach(arr, callback) {
    for (var i = 0; i < arr.length; ++i) {
        setTimeout(function() {
            callback(arr[i]);
        }, 0);
    }
}

console.log("begin asyncEach");
asyncEach([1, 2, 3], logItem);
console.log("end asyncEach");
*/

/*
function asyncEach2(arr, callback) {
    for (var i = 0; i < arr.length; ++i) {
        (function(iCopy) {
            setTimeout(function() {
                callback(arr[iCopy]);
            }, 0);
        }(i));
    }
}

console.log("begin asyncEach2");
asyncEach2([1, 2, 3], logItem);
console.log("end asyncEach2");
*/

/*
function asyncEach3(arr, callback) {
    function makeCallbackWrapper(arr, i, callback) {
        return function() {
            callback(arr[i]);
        }
    }

    for (var i = 0; i < arr.length; ++i) {
        setTimeout(makeCallbackWrapper(arr, i, callback), 0);
    }
}

console.log("begin asyncEach3");
asyncEach3([1, 2, 3], logItem);
console.log("end asyncEach3");
*/

function asyncEach4(arr, callback) {
    for (var i = 0; i < arr.length; ++i) {
        var boundCallback = callback.bind(null, arr[i]);
        setTimeout(boundCallback, 0);
    }
}

console.log("begin asyncEach4");
asyncEach4([1, 2, 3], logItem);
console.log("end asyncEach4");

</script>
</body>
</html>
